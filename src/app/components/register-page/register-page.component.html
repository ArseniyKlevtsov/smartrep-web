<form [formGroup]="form" (ngSubmit)="onSubmit()" class="auth-block" novalidate>
  <div class="card shadow-sm">
    <div class="card-body p-4">
      <h5 class="card-title mb-4 text-center">Регистрация</h5>

      <!-- Поле Username -->
      <div class="mb-3">
        <label for="userName" class="form-label">Имя пользователя:</label>
        <div class="input-group">
          <span class="input-group-text"
            ><i class="bi bi-person-fill"></i
          ></span>
          <input
            formControlName="userName"
            id="userName"
            type="text"
            class="form-control"
            [ngClass]="{
              'is-invalid':
                form.get('userName').invalid && form.get('userName').touched
            }"
          />
        </div>
        <div
          *ngIf="form.get('userName').invalid && form.get('userName').touched"
          class="invalid-feedback"
        >
          <div *ngIf="form.get('userName').errors?.['required']">
            Имя пользователя обязательно.
          </div>
        </div>
      </div>

      <!-- Поле Password -->
      <div class="mb-3">
        <label for="password" class="form-label">Пароль:</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
          <input
            formControlName="password"
            id="password"
            type="password"
            class="form-control"
            [ngClass]="{
              'is-invalid':
                form.get('password').invalid && form.get('password').touched
            }"
          />
        </div>
        <div
          *ngIf="form.get('password').invalid && form.get('password').touched"
          class="invalid-feedback"
        >
          <div *ngIf="form.get('password').errors?.['required']">
            Пароль обязателен.
          </div>
          <div *ngIf="form.get('password').errors?.['minlength']">
            Пароль должен содержать минимум
            {{form.get('password').errors?.['minlength'].requiredLength}}
            символов.
          </div>
        </div>
      </div>

      <div class="mb-3">
        <label for="confirmPassword" class="form-label"
          >Подтвердите пароль:</label
        >
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
          <input
            formControlName="confirmPassword"
            id="confirmPassword"
            type="password"
            class="form-control"
            [ngClass]="{
              'is-invalid':
                (form.get('confirmPassword').invalid &&
                  form.get('confirmPassword').touched) ||
                form.hasError('mismatch')
            }"
          />
        </div>
        <div class="invalid-feedback">
          <div
            *ngIf="form.get('confirmPassword').errors?.['required'] && form.get('confirmPassword').touched"
          >
            Подтверждение пароля обязательно
          </div>
          <div
            *ngIf="
              form.hasError('mismatch') && form.get('confirmPassword').touched
            "
          >
            Пароли не совпадают
          </div>
        </div>
      </div>

      <!-- Кнопка отправки -->
      <div class="d-grid">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="form.invalid || form.disabled"
        >
          Зарегистрироваться
        </button>
      </div>
    </div>
  </div>
</form>
